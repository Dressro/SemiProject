<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.project.fp.order_table">

	<select id="selectList" resultType="Order_TableDto">
		SELECT ORDER_NUM, ORDER_DATE, ORDER_QUANTITY, ORDER_PRICE, ORDER_STEP, ORDER_PAY, ORDER_GROUP, PROD_NUM, MEMBER_ID
		FROM ORDER_TABLE
		ORDER BY ORDER_NUM DESC
	</select>
	
	<select id="selectbasketList" parameterType="String" resultType="Order_TableDto">
		SELECT ORDER_NUM, ORDER_DATE, ORDER_QUANTITY, ORDER_PRICE, ORDER_STEP, ORDER_PAY, ORDER_GROUP, PROD_NUM, MEMBER_ID
		FROM ORDER_TABLE
		WHERE MEMBER_ID = #{member_id}
		AND ORDER_STEP = '미결제'
		ORDER BY ORDER_NUM DESC
	</select>
	
	<select id="selectpayList" parameterType="String" resultType="Order_TableDto">
		SELECT ORDER_NUM, ORDER_DATE, ORDER_QUANTITY, ORDER_PRICE, ORDER_STEP, ORDER_PAY, ORDER_GROUP, PROD_NUM, MEMBER_ID
		FROM ORDER_TABLE
		WHERE MEMBER_ID = #{member_id}
		AND NOT ORDER_STEP IN ('미결제')
		ORDER BY ORDER_NUM DESC
	</select>
	
	<select id="selectOne" parameterType="int" resultType="Order_TableDto">
		SELECT ORDER_NUM, ORDER_DATE, ORDER_QUANTITY, ORDER_PRICE, ORDER_STEP, ORDER_PAY, ORDER_GROUP, PROD_NUM, MEMBER_ID
		FROM ORDER_TABLE
		WHERE ORDER_NUM = #{order_num}
	</select>
	
	<insert id="insert" parameterType="Order_TableDto">
		INSERT INTO ORDER_TABLE
		VALUES(ORDER_NUM_SEQ.NEXTVAL, SYSDATE, #{order_quantity}, #{order_price}, '미결제', 'N', ORDER_GROUP_SEQ.NEXTVAL, #{prod_num}, #{member_id})
	</insert>

	<delete id="delete" parameterType="Order_TableDto">
		DELETE FROM ORDER_TABLE
		WHERE ORDER_NUM = #{order_num}
	</delete>

</mapper>